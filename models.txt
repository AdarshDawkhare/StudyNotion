using System.ComponentModel.DataAnnotations;
using MongoDB.Bson;
using MongoDB.Bson.Serialization.Attributes;

namespace StudyNotionServer.Data
{
    public class User
    {
        // MongoDB primary key
        [BsonId]
        [BsonRepresentation(BsonType.ObjectId)]
        public string Id { get; set; } = string.Empty;

        [Required]
        public string FirstName { get; set; } = string.Empty;

        [Required]
        public string LastName { get; set; } = string.Empty;

        [Required, EmailAddress]
        public string Email { get; set; } = string.Empty;

        [Required]
        public string PasswordHash { get; set; } = string.Empty;

        [Required]
        public accountType AccountType { get; set; }

        [Required]
        public string Image { get; set; } = string.Empty;


        // Reference to Profile
        [Required]
        [BsonRepresentation(BsonType.ObjectId)]
        public string ProfileId { get; set; } = string.Empty;
        public Profile? Profile { get; set; }


        // Reference to Courses (Foreign Key style)
        [BsonRepresentation(BsonType.ObjectId)]
        public List<string> CourseIds { get; set; } = new();
        public List<Course> Courses { get; set; }



        [BsonRepresentation(BsonType.ObjectId)]
        public List<ObjectId> CourseProgressIds { get; set; }
        public List<CourseProgress> CourseProgresses    { get; set; }
    }

    public enum accountType
    {
        Admin,
        Student,
        Instructor
    }
}

using MongoDB.Bson;
using MongoDB.Bson.Serialization.Attributes;

namespace StudyNotionServer.Data
{
    public class Profile
    {
        // MongoDB primary key
        [BsonId]
        [BsonRepresentation(BsonType.ObjectId)]
        public string Id { get; set; } = string.Empty;

        public string Gender { get; set; } = string.Empty;

        public string DateOfBirth { get; set; } = string.Empty;

        public string About { get; set; } = string.Empty;

        public int  phoneNumber { get; set; }
    }
}


using System.ComponentModel.DataAnnotations;
using MongoDB.Bson;
using MongoDB.Bson.Serialization.Attributes;

namespace StudyNotionServer.Data
{
    public class Course
    {
        [BsonId]
        [BsonRepresentation(BsonType.ObjectId)]
        public string Id { get; set; } = string.Empty;
        public string Title { get; set; } = string.Empty;
        public string Description { get; set; } = string.Empty;
        public string WhatYouWillLearn { get; set; } = string.Empty;
        public int Price { get; set; }
        public string Thumbnail { get; set; } = string.Empty;

        // Reference to Instructor
        [Required,BsonRepresentation(BsonType.ObjectId)]
        public string InstructorId { get; set; } =string.Empty;
        public User? Instructor { get; set; }

        // Reference to section
        [BsonRepresentation(BsonType.ObjectId)]
        public string SectionId { get; set; } = string.Empty ;
        public Section? Section { get; set; }

        //Reference to ratings and reviews
        [BsonRepresentation(BsonType.ObjectId)]
        public List<string>? RatingAndReviewsIds { get; set; } = new();
        public List<RatingAndReview>? RatingAndReviews { get; set; }

        //Reference to tag
        [BsonRepresentation(BsonType.ObjectId)]
        public string TagId { get; set; }
        public Tag? tag { get; set; }

        [BsonRepresentation(BsonType.ObjectId)]
        public List<string>? EnrolledStudentsIds {  get; set; } = new() ;
        public List<User>? Students {  get; set; }
    }
}


using MongoDB.Bson;
using MongoDB.Bson.Serialization.Attributes;

namespace StudyNotionServer.Data
{
    public class CourseProgress
    {
        [BsonId]
        [BsonRepresentation(BsonType.ObjectId)]
        public string CourseId { get; set; } = string.Empty;
        public Course? Course { get; set; }

        //Reference to Subsections
        public List<string> CompletedVideosIds {  get; set; }
        public List<SubSection> SubSections { get; set; }

    }
}


using System.ComponentModel.DataAnnotations;
using MongoDB.Bson.Serialization.Attributes;
using MongoDB.Bson;

namespace StudyNotionServer.Data
{
    public class OTP
    {
        [BsonId]
        [BsonRepresentation(BsonType.ObjectId)]
        public string Id { get; set; } = string.Empty;

        [Required]
        public string Email { get; set; } = string.Empty;

        [Required]
        public string otp { get; set; } = string.Empty;

        [Required]
        public DateTime CreatedAt {  get; set; } = DateTime.Now;
    }
}


using MongoDB.Bson;
using MongoDB.Bson.Serialization.Attributes;

namespace StudyNotionServer.Data
{
    public class Section
    {
        [BsonId]
        [BsonRepresentation(BsonType.ObjectId)]
        public string Id { get; set; } = string.Empty;
        public string SectionName { get; set; } = string.Empty;

        //Reference to subsection
        [BsonRepresentation(BsonType.ObjectId)]
        public List<string> SubSectionsIds { get; set; } = new();
        public List<SubSection> SubSections { get; set; }
    }
}


using MongoDB.Bson;
using MongoDB.Bson.Serialization.Attributes;

namespace StudyNotionServer.Data
{
    public class SubSection
    {
        [BsonId]
        [BsonRepresentation(BsonType.ObjectId)]
        public string Id { get; set; } = string.Empty;

        public string Title { get; set; } = string.Empty;
        public string timeDuration { get; set; } = string.Empty ;
        public string Description { get; set; } = string.Empty;
        public string VideoUrl { get; set; } = string.Empty;
    }
}


using MongoDB.Bson;
using MongoDB.Bson.Serialization.Attributes;

namespace StudyNotionServer.Data
{
    public class RatingAndReview
    {
        [BsonId]
        [BsonRepresentation(BsonType.ObjectId)]
        public string Id { get; set; } = string.Empty;

        public int Rating { get; set; }

        public string Review { get; set; } = string.Empty;  
        
        //Reference to User
        [BsonRepresentation(BsonType.ObjectId)]
        public string UserId { get; set; } = string.Empty;
        public User? user { get; set; }
    }
}


using System.ComponentModel.DataAnnotations;
using MongoDB.Bson;
using MongoDB.Bson.Serialization.Attributes;

namespace StudyNotionServer.Data
{
    public class Tag
    {
        [BsonId]
        [BsonRepresentation(BsonType.ObjectId)]
        public string Id { get; set; } = string.Empty;

        [Required]
        public string Name { get; set; } = string.Empty;
    
        public string Description { get; set; } = string.Empty ;

        //Reference to Course
        [BsonRepresentation(BsonType.ObjectId)]
        public string CourseId { get; set; } = string.Empty;
        public Course? course { get; set; }

    }
}

